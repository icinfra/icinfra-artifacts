<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="RTM调优" /><meta property="og:locale" content="en" /><meta name="description" content="管理 RTM - 高级配置和性能调优" /><meta property="og:description" content="管理 RTM - 高级配置和性能调优" /><link rel="canonical" href="https://icinfra.cn/posts/administering-rtm-advanced-configuration-and-performance-tuning/" /><meta property="og:url" content="https://icinfra.cn/posts/administering-rtm-advanced-configuration-and-performance-tuning/" /><meta property="og:site_name" content="IC Infra" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-04-12T16:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="RTM调优" /><meta name="twitter:site" content="@username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-04-12T16:00:00+00:00","datePublished":"2025-04-12T16:00:00+00:00","description":"管理 RTM - 高级配置和性能调优","headline":"RTM调优","mainEntityOfPage":{"@type":"WebPage","@id":"https://icinfra.cn/posts/administering-rtm-advanced-configuration-and-performance-tuning/"},"url":"https://icinfra.cn/posts/administering-rtm-advanced-configuration-and-performance-tuning/"}</script><title>RTM调优 | IC Infra</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="IC Infra"><meta name="application-name" content="IC Infra"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="https://cdn.jsdelivr.net/gh/icinfra/icinfra-artifacts-0001@artifacts/img/avatar.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">IC Infra</a><p class="site-subtitle fst-italic mb-0">Focused on building and optimizing stable and efficient IC design infrastructure, offering in-depth insights into cutting-edge tools, workflows, and automation techniques. Feel free to contact me.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/discussions/" class="nav-link"> <i class="fa-fw fas fa-comments"></i> <span>DISCUSSIONS</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/wanlinwang" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="javascript:location.href = 'mailto:' + ['wanlin.wang','foxmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>RTM调优</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>RTM调优</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1744473600" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 12, 2025 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/wanlinwang">wanlinwang</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="9658 words" > <em>53 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">RTM调优</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">RTM调优</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><h1 id="管理-rtm---高级配置和性能调优">管理 RTM - 高级配置和性能调优</h1><p>本文详细介绍了 IBM Spectrum LSF RTM (RTM) 的高级配置选项和性能调优技术，旨在帮助管理员更好地监控集群并优化 RTM 性能。</p><h2 id="控制-lsf-集群"><span class="me-2">控制 LSF 集群</span><a href="#控制-lsf-集群" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>RTM 提供了控制 LSF 集群、主机、队列和作业的功能，前提是您已启用 RTM 对 LSF 集群的控制权限。RTM 通过在 LSF 管理主机上启动 LSF 命令来实现对集群的控制。</p><p><strong>可控制的组件和操作：</strong></p><ul><li><strong>集群级组件：</strong><ul><li><code class="language-plaintext highlighter-rouge">mbatchd</code> (管理批处理守护进程): 启动、重启或关闭。<li>LIM (负载信息管理器): 启动、重启或关闭。<li>RES (资源执行服务器): 启动、重启或关闭。<li>运行 <code class="language-plaintext highlighter-rouge">badmin reconfig</code>: 动态重新配置 LSF。<li>运行 <code class="language-plaintext highlighter-rouge">lsadmin reconfig</code>: 重启集群中所有主机上的 LIM。</ul><li><strong>主机：</strong><ul><li>打开或关闭 LSF 集群中的主机。</ul><li><strong>队列：</strong><ul><li>打开队列<li>关闭队列<li>激活队列<li>取消激活队列<li>将所有作业从一个队列切换到另一个队列</ul><li><strong>作业：</strong><ul><li><code class="language-plaintext highlighter-rouge">btop</code>: 将挂起作业相对于队列中的第一个作业移动。<li><code class="language-plaintext highlighter-rouge">bbot</code>: 将挂起作业相对于队列中的最后一个作业移动。<li><code class="language-plaintext highlighter-rouge">bswitch</code>: 将未完成的作业从一个队列切换到另一个队列。<li><code class="language-plaintext highlighter-rouge">bresume</code>: 恢复挂起的作业。<li><code class="language-plaintext highlighter-rouge">brun</code>: 强制作业立即运行。<li><code class="language-plaintext highlighter-rouge">bstop</code>: 挂起未完成的作业。<li><code class="language-plaintext highlighter-rouge">bkill</code>: 发送信号以终止未完成的作业。<li>强制终止 (Force kill): 使用 <code class="language-plaintext highlighter-rouge">bkill -r</code> 命令强制终止作业。<li>信号终止 (Signal kill): 使用 <code class="language-plaintext highlighter-rouge">bkill -s</code> 命令发送特定信号以终止作业。</ul></ul><h3 id="在-lsf-集群上运行-grid-控制命令"><span class="me-2">在 LSF 集群上运行 Grid 控制命令</span><a href="#在-lsf-集群上运行-grid-控制命令" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>可以通过 RTM 控制台在 LSF 集群上运行 LSF 命令。</p><p><strong>前提条件：</strong></p><ul><li>必须已在 LSF 集群上启用了 Grid 控制。</ul><p><strong>步骤：</strong></p><ol><li>在 RTM 控制台中，点击 <strong>Console</strong> 标签页。<li>在 <strong>Grid Management</strong> 部分，点击 <strong>Clusters</strong>。<li>点击您想要配置的集群的 <strong>Cluster Name</strong> 链接。<li>配置集群设置。如果 Grid 控制需要更多信息，请在显示的字段中指定详细信息。<li>点击 <strong>Save</strong>。</ol><p><strong>结果：</strong></p><ul><li>可以在“查看 LSF 集群和作业信息”部分查看集群的状态。</ul><h2 id="强制执行集群操作控制注释"><span class="me-2">强制执行集群操作控制注释</span><a href="#强制执行集群操作控制注释" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>RTM 可以为以下操作强制要求输入注释：</p><ul><li>按主机 (By Host)<li>按队列 (By Queue)<li>集群 (Cluster)</ul><p>您必须设置 <strong>Mandatory Cluster Action Control Comments</strong> 选项，以允许您的 Grid 管理员在提交主机、队列或集群的控制操作（如启动/重启/关闭、打开/关闭）之前输入注释。</p><h3 id="设置强制集群操作控制注释"><span class="me-2">设置强制集群操作控制注释</span><a href="#设置强制集群操作控制注释" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>步骤：</strong></p><ol><li>点击 <strong>Console</strong> 标签页。<li>在 <strong>Configuration</strong> 部分，点击 <strong>Grid Settings</strong>。<li>点击 <strong>General</strong> 标签页。<li>在 <strong>Cluster Control Settings</strong> 下，选中 <strong>Mandatory Cluster Action Control Comments</strong> 复选框。<li>点击 <strong>Save</strong>。</ol><h3 id="对主机队列或集群的集群操作控制添加注释"><span class="me-2">对主机、队列或集群的集群操作控制添加注释</span><a href="#对主机队列或集群的集群操作控制添加注释" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>步骤：</strong></p><ol><li>点击 <strong>Grid</strong> 标签页。<li>在 <strong>Job Info</strong> 部分，点击 <strong>By Host</strong>, <strong>By Queue</strong>, 或 <strong>By Cluster</strong>。<li>选中您想要执行操作的一个或多个主机名对应的复选框。<li>从列表中选择一个操作。<li>点击 <strong>Go</strong>。将显示一个确认对话框。<li>在文本框中输入您的注释。如果设置了强制集群操作注释，您必须输入注释才能继续提交。<li>点击 <strong>Yes</strong>。</ol><h2 id="为集群配置空闲作业检测"><span class="me-2">为集群配置空闲作业检测</span><a href="#为集群配置空闲作业检测" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><strong>关于此任务：</strong></p><ul><li>空闲作业是按集群在 <strong>Cluster Edit</strong> 页面上配置的，并非全局配置。<li>可以排除特定队列（例如，提交到交互式队列的作业）不参与空闲作业计算。<li><strong>注意：</strong> 全新安装 RTM 10.2 后，任何先前的空闲作业设置都将失效，您必须重新配置它们。</ul><p><strong>步骤：</strong></p><ol><li>点击 <strong>Console</strong> 标签页。<li>在 <strong>Grid Management</strong> 部分，点击 <strong>Clusters</strong>。<li>点击您想要设置空闲作业检测的集群的 <strong>Cluster Name</strong>。<li>如果您想在集群中搜索空闲作业，请选中 <strong>Enable Idle Job Detection</strong> 复选框。<li>您可以选择为以下字段设置值：<ul><li><strong>Email Notification Type</strong> (邮件通知类型)<li><strong>Minimum Runtime</strong> (最小运行时间)<li><strong>Floating Window</strong> (浮动窗口)<li><strong>CPU Time Threshold</strong> (CPU 时间阈值)<li><strong>Include Job Types</strong> (包含的作业类型)<li><strong>Job Commands</strong> (作业命令)<li><strong>Idle Jobs Exclude Queues</strong> (空闲作业排除队列)</ul><li>点击 <strong>Save</strong>。</ol><h2 id="配置空闲作业检测-grid-设置"><span class="me-2">配置空闲作业检测 (Grid 设置)</span><a href="#配置空闲作业检测-grid-设置" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><strong>步骤：</strong></p><ol><li>点击 <strong>Console</strong> 标签页。<li>在 <strong>Configuration</strong> 部分，点击 <strong>Grid Settings</strong>，然后转到 <strong>Idle jobs</strong> 标签页。<li>设置 <strong>Idle Job Detection</strong> 字段的值：<ul><li><strong>Filter Name</strong> (过滤器名称): 提供过滤器名称以显示图例和作业异常。<li><strong>Email Subject</strong> (邮件主题): 使用替换标签 <code class="language-plaintext highlighter-rouge">&lt;JOBID&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;INDEXID&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;SUBMITTIME&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;CLUSTERNAME&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;USER&gt;</code>, 和 <code class="language-plaintext highlighter-rouge">&lt;CPUSECS&gt;</code> 定义空闲作业邮件主题。<li><strong>Email Message</strong> (邮件内容): 使用替换标签 <code class="language-plaintext highlighter-rouge">&lt;JOBID&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;SUBMITTIME&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;CLUSTERNAME&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;USER&gt;</code>, 和 <code class="language-plaintext highlighter-rouge">&lt;CPUSECS&gt;</code> 定义邮件内容。<li><strong>Legend Background Color</strong> (图例背景颜色): 定义图例。如果颜色设置为 <code class="language-plaintext highlighter-rouge">None</code>，则禁用此功能。</ul><li>点击 <strong>Save</strong>。</ol><h2 id="配置内存违规检测"><span class="me-2">配置内存违规检测</span><a href="#配置内存违规检测" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><strong>关于此任务：</strong></p><ul><li>您可以配置作业的内存设置，以帮助您监控内存使用情况并灵活控制作业。</ul><p><strong>步骤：</strong></p><ol><li>转到 <strong>Console &gt; Configuration &gt; RTM Settings</strong>。<li>转到 <strong>Memory Exceptions</strong> 标签页。<li>设置 <strong>Memory RUSAGE Violations</strong> 字段的值：<ul><li><strong>Enable Memory RUSAGE Job Detection</strong>: 搜索内存违规作业。<li><strong>Email Summary Reports</strong>: 接收邮件摘要报告通知的帐户。<li><strong>Email Schedule</strong>: 接收邮件的通知频率。邮件在数据库维护期间每周日发送。<li><strong>Memory Overusage Filter Name</strong>: 在作业详情图例中显示的内存过度使用过滤器名称。<li><strong>Memory Overusage Allocation</strong>: 在标记作业之前，可接受的高于 RUSAGE 级别的内存使用百分比。<li><strong>Memory Overusage Background Color</strong>: 图例颜色。如果颜色设置为 <code class="language-plaintext highlighter-rouge">None</code>，则禁用此功能。<li><strong>Memory Underusage Filter Name</strong>: 在图例和作业异常过滤器显示中显示的内存使用不足过滤器名称。<li><strong>Memory Underusage Allocation</strong>: 在标记作业之前，可接受的低于 RUSAGE 级别的内存使用百分比。<li><strong>Memory Underusage Background Color</strong>: 图例和行显示的颜色。如果颜色设置为 <code class="language-plaintext highlighter-rouge">None</code>，则禁用此功能。<li><strong>Minimum Run Window</strong>: 最小运行时间。<li><strong>Minimum Memory Limit</strong>: 作业的最小内存限制。<li><strong>Email Subject</strong>: 使用替换标签 <code class="language-plaintext highlighter-rouge">&lt;OVERFILTER&gt;/&lt;UNDERFILTER&gt;</code> 和 <code class="language-plaintext highlighter-rouge">&lt;CLUSTERNAME&gt;</code> 定义。<li><strong>Email Message</strong>: 使用替换标签 <code class="language-plaintext highlighter-rouge">&lt;CLUSTERNAME&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;OVERFILTER&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;OVERSHOOT&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;UNDERFILTER&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;UNDERSHOOT&gt;</code>, 和 <code class="language-plaintext highlighter-rouge">&lt;REPORTTABLE&gt;</code> 定义。</ul><li>点击 <strong>Save</strong>。</ol><h2 id="添加或编辑-rtm-监控的-lsf-集群"><span class="me-2">添加或编辑 RTM 监控的 LSF 集群</span><a href="#添加或编辑-rtm-监控的-lsf-集群" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>要添加或编辑 RTM 监控的 LSF 集群，需要按顺序执行以下操作：</p><ol><li>添加或编辑集群。<li>将 RTM 主机作为 LSF 客户端添加到 LSF 集群。</ol><h3 id="添加或编辑集群"><span class="me-2">添加或编辑集群</span><a href="#添加或编辑集群" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>可以通过以下任一方法添加或编辑您希望 RTM 监控的任何 LSF 集群：</p><ul><li><strong>使用 RTM 控制台添加或编辑集群</strong><li><strong>使用脚本将集群添加到 RTM</strong></ul><h4 id="使用-rtm-控制台添加或编辑集群"><span class="me-2">使用 RTM 控制台添加或编辑集群</span><a href="#使用-rtm-控制台添加或编辑集群" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>步骤：</strong></p><ol><li>点击 <strong>Console</strong> 标签页。<li>在 <strong>Grid Management</strong> 部分，点击 <strong>Clusters</strong>。<li>选择添加或编辑集群：<ul><li>要添加 LSF 集群，点击 <strong>Add</strong>。<li>要编辑现有 LSF 集群，点击您想要编辑的集群的名称。</ul><li>指定（或更新）描述您的 LSF 集群所需的字段。至少需要指定以下字段来添加 LSF 集群：<strong>Cluster Name</strong>, <strong>LSF Master LIM Hostname</strong>, <strong>LSF Master LIM Port</strong>, <strong>Grid Poller</strong>, 和 <strong>Primary LSF Administrator Username</strong>。<ul><li><strong>安装位置注意事项：</strong><ul><li><strong>监控多个独立集群：</strong> 为获得最佳性能，请将 RTM 安装在 LSF 客户端主机上。但是，如果您打算监控多个独立集群并且您的 RTM 主机充当 LSF 服务器，请确保集群使用不同的 LIM 端口。<li><strong>监控 LSF 多集群成员：</strong> 当监控 LSF 多集群环境中的两个或多个成员时，必须将 RTM 安装在多集群内任何成员的 LSF 客户端主机上。</ul><li>对于 <strong>Grid Poller</strong> 字段，选择适合您的 LSF 集群版本的轮询器。此版本允许选择 <strong>Poller for LSF 8</strong>。</ul><li>点击 <strong>Create</strong> (或 <strong>Save</strong>) 来保存您的 LSF 集群设置。</ol><p><strong>后续操作：</strong></p><ul><li>如果您编辑了已在 RTM 控制台中的 LSF 集群，则无需执行其他操作。<li>如果您向 RTM 控制台添加了 LSF 集群，则必须按照“将 RTM 主机作为 LSF 客户端添加到 LSF 集群”中的说明将 RTM 主机添加到 LSF 集群。</ul><h4 id="使用脚本将集群添加到-rtm"><span class="me-2">使用脚本将集群添加到 RTM</span><a href="#使用脚本将集群添加到-rtm" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>关于此任务：</strong></p><ul><li>使用 <code class="language-plaintext highlighter-rouge">grid_add_cluster.php</code> 脚本将 LSF 集群添加到 RTM。</ul><p><strong>步骤：</strong></p><ol><li>从命令行转到 Cacti 安装目录的 <code class="language-plaintext highlighter-rouge">plugins/grid</code> 子目录。<li>使用 php 运行 <code class="language-plaintext highlighter-rouge">grid_add_cluster.php</code> 脚本：<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>php <span class="nt">-q</span> grid_add_cluster.php <span class="nt">--type</span><span class="o">=</span>0 <span class="nt">--pollerid</span><span class="o">=</span>lsf_type <span class="nt">--cluster_name</span><span class="o">=</span>cluster_name_text <span class="nt">--cluster_env</span><span class="o">=</span>lsf_envdir_path
</pre></table></code></div></div><p>其中：</p><ul><li><code class="language-plaintext highlighter-rouge">lsf_type</code>: 代表集群中运行的 LSF 版本的整数 Poller ID。<strong>注意：</strong> Poller ID 不一定按顺序排列。最好使用 RTM 控制台 (<strong>Console &gt; Clusters &gt; Pollers</strong>) 来识别您要使用的 Poller ID。<li><code class="language-plaintext highlighter-rouge">cluster_name_text</code>: 集群的名称。<li><code class="language-plaintext highlighter-rouge">lsf_envdir_path</code>: LSF 集群的 <code class="language-plaintext highlighter-rouge">lsf.conf</code> 文件路径。<li><strong>示例：</strong> 添加一个名为 <code class="language-plaintext highlighter-rouge">maincluster</code> 的 LSF 10.1 集群，其 <code class="language-plaintext highlighter-rouge">lsf.conf</code> 在 <code class="language-plaintext highlighter-rouge">/share/lsf/conf</code>，Poller ID 为 9：<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>  php <span class="nt">-q</span> grid_add_cluster.php <span class="nt">--type</span><span class="o">=</span>0 <span class="nt">--pollerid</span><span class="o">=</span>9 <span class="nt">--cluster_name</span><span class="o">=</span>maincluster <span class="nt">--cluster_env</span><span class="o">=</span>/share/lsf/conf
</pre></table></code></div></div></ul></ol><p><strong>后续操作：</strong></p><ul><li>将 RTM 主机作为 LSF 客户端添加到 LSF 集群。<li>通过 RTM 控制台 (<strong>Clusters</strong>) 验证新集群已添加并处于“up”状态。</ul><h3 id="将-rtm-主机作为-lsf-客户端添加到-lsf-集群"><span class="me-2">将 RTM 主机作为 LSF 客户端添加到 LSF 集群</span><a href="#将-rtm-主机作为-lsf-客户端添加到-lsf-集群" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>关于此任务：</strong></p><ul><li>对于 RTM 监控的任何 LSF 集群，您必须将 RTM 主机作为 LSF 客户端添加到该集群，以便 RTM 访问 LSF 集群数据。</ul><p><strong>步骤：</strong></p><ol><li>登录到 LSF 管理主机。<li>如果 LSF 管理主机无法将 RTM 主机名解析为 IP 地址，请编辑 <code class="language-plaintext highlighter-rouge">/etc/hosts</code> 文件并添加 RTM 主机的 IP 地址和主机名。（如果能成功 ping 通 RTM 主机名，则跳过此步）。<li>编辑 <code class="language-plaintext highlighter-rouge">lsf.cluster.&lt;cluster_name&gt;</code> 文件，并将 RTM 主机添加到 <strong>Host</strong> 部分。（如果配置了浮动客户端，则无需添加 RTM 主机）。<li>重新配置 LIM 并重启 mbatchd 以应用更改：<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>lsadmin reconfig
badmin mbdrestart
</pre></table></code></div></div><li>测试 RTM 主机是否成功添加到 LSF 集群： a. 登录到 RTM 主机。 b. 从 RTM 主机使用 telnet 登录到 LSF 管理主机的 LSF LIM 端口（LSF 8 及以上版本默认为 7869）。 <code class="language-plaintext highlighter-rouge">bash telnet &lt;LSF_management_host_IP&gt; 7869 </code> 如果能连接到 LSF 管理主机的 IP 地址，则表示添加成功。</ol><p><strong>结果：</strong></p><ul><li>RTM 现在可以监控该 LSF 集群了。</ul><p><strong>后续操作：</strong></p><ul><li>如果您希望 RTM 能够监控 LSF 集群中的所有单个主机，请将 LSF 集群中的所有主机添加到 RTM。</ul><h2 id="grid-heuristics-jobiq"><span class="me-2">Grid Heuristics (JobIQ)</span><a href="#grid-heuristics-jobiq" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>JobIQ 为 LSF 用户提供了一个可定制的视图，用于将其工作负载与 LSF 内部其他用户的工作负载进行比较。它还提供了 RTM 中包含的用户和集群范围数据的多个横截面视图。</p><ul><li><strong>功能：</strong><ul><li>显示您所有作业的信息，并将其与所有其他用户的作业进行比较。<li>提供关于您的作业运行时间是否比通常更长的洞察。<li>提供最近两天的作业历史记录视图。<li>允许直接控制您的作业（重新排队、终止、挂起等）。<li>按队列和项目确定所有作业的状态（运行、挂起、暂停）。<li>显示异常退出作业的退出原因。</ul><li><strong>筛选作业视图：</strong><ul><li>自定义视图，包括要显示的窗格和要查看的用户。<li>可以保存设置供下次使用。<li>RTM 管理员可以将 JobIQ 页面设置为用户的默认登录页面。<li>按常见问题筛选作业视图。<li>选择用户、集群和队列。<li>选择要在 JobIQ 仪表板中看到的视图和图表。<li>限制每个表中显示的信息行数（全部、5、10 或 20 条记录）。<li>选择视图刷新频率（1-5 分钟或从不）。</ul><li><strong>查看工作负载历史记录：</strong><ul><li>查看过去两天的工作负载历史记录。<li><strong>Summary</strong> 视图创建 <strong>Current Status by Cluster (all Queues)</strong> 表，显示所有队列中的挂起、运行和暂停作业，以及每小时完成和退出的作业数、小时吞吐量和 5 分钟吞吐量。</ul><li><strong>查看跨多个集群的整体工作负载：</strong><ul><li><strong>Daily Throughput by Cluster</strong> 表显示当天和前一天完成和退出作业的总数。<li><strong>Average TT Today</strong> 显示当天运行的所有作业的平均周转时间（从提交到完成的总分钟数）。<li><strong>Current Status by Queue/Project</strong> 表显示：<ul><li>每个队列的挂起作业数 / 排在您之前的挂起作业数（基于 LSF fairshare 动态优先级）。例如，<code class="language-plaintext highlighter-rouge">670 / 230</code> 表示您有 670 个挂起作业，而其他用户在同一队列中有 230 个作业排在您前面。<li>运行和暂停的作业数 / 其他用户在同一队列中的运行和暂停作业数。<li>小时吞吐量 (TPut(1Hr)) 和 5 分钟吞吐量 (TPut(5Min)) / 其他用户在同一队列中的吞吐量。<li><strong>Estimate</strong>：根据运行时启发式（项目中作业运行时长的第 70 百分位）和吞吐量，估计您的作业何时预期完成。</ul><li><strong>“Stoplight graph” (红绿灯图)</strong> 显示多种警告类型（空闲作业、慢速作业、有依赖关系的作业、内存异常）的状态。<ul><li>如果任何警告类别的红绿灯图显示非绿色状态，将鼠标悬停在图标上可查看完整状态。<li>点击状态图标可查看该作业的详细信息。<li><strong>Idle Jobs</strong> (红色): 运行中的作业未使用任何 CPU 时间。<li><strong>Long Jobs</strong> (红色): 作业超出了队列和项目中具有相同资源需求的作业的第 90 百分位。<li><strong>Pend Dpnd</strong> (黄色): 作业有依赖关系；(红色): 有无效的作业依赖关系。<li><strong>Mem Use</strong> (黄色): 作业使用的内存少于您保留的内存；(红色): 作业使用的内存远多于您保留的内存。</ul><li>在 <strong>Current Status by Queue/Project</strong> 表中，点击队列或项目名称可在 <strong>Graphs</strong> 窗格中查看图表，总结选定时间段内的挂起、运行和完成作业。<li><strong>General</strong> 窗格提供多个按队列的高级图表，总结选定时间段内的内存使用和作业吞吐量。</ul><li><strong>查看工作负载消耗的资源：</strong><ul><li>查看您的工作负载与其他用户相比所消耗的资源。<li>在 <strong>Current Status by Queue/Project</strong> 表中，点击挂起、运行或暂停的作业数量，可显示该状态下的作业列表。<li>在 <strong>Grid Heuristics &gt; View Job Listing</strong> 页面，按集群、队列、项目或作业状态筛选作业列表，并将表格导出为 <code class="language-plaintext highlighter-rouge">.csv</code> 文件进行进一步分析。<li>列表中显示每个作业的警告状态：空闲作业、慢速作业、有依赖关系的作业和内存异常。<li>点击作业列表中的作业 ID 可查看该作业的详细信息。<li>在作业详细信息视图中，使用 <strong>Job Graphs</strong> 查看作业资源使用情况的图表（内存消耗、CPU 时间、运行中的进程 ID (PID) 及其随时间的变化）。<li><strong>Hosts Graphs</strong> 显示作业的各种基于主机的统计信息。</ul><li><strong>查看许可证使用情况：</strong><ul><li><strong>Feature Checkouts for User</strong> 表允许按用户检查许可证使用情况。<li><strong>Grid Heuristics &gt; View Job Listing</strong> 页面也包含一列显示已签出的许可证。</ul><li><strong>按队列查看挂起原因：</strong><ul><li><strong>View Pending Reasons by Queue for User</strong> 表显示每个用户的挂起作业数量及其原因，以及挂起所花费的时间。</ul><li><strong>查看哪些作业有异常：</strong><ul><li>选择 <strong>Exit Analysis</strong> 以获取有关潜在问题作业的洞察。<li><strong>Exit Analysis by Queue/Project</strong> 表显示过去一天内具有运行时、空闲或内存异常的作业。<li>可以深入查看以控制这些作业。<li>退出分析页面显示退出作业的数量和 LSF 退出原因。</ul><li><strong>控制您的作业：</strong><ul><li>在 <strong>Grid Heuristics &gt; View Job Listing</strong> 页面，使用 <strong>Choose an action</strong> 菜单控制列表中的任何作业。<li>在队列中向上或向下移动作业、将作业切换到另一个队列、强制作业立即运行（需相应权限）、挂起、恢复、终止、重新排队或发送信号给作业。</ul></ul><h2 id="挂起原因-pending-reasons"><span class="me-2">挂起原因 (Pending Reasons)</span><a href="#挂起原因-pending-reasons" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>您可以选择挂起原因级别来理解您的作业为何挂起。这是通过将挂起原因分类，然后仅显示顶级类别中的首要原因来实现的。</p><ul><li><strong>未分类挂起原因 (-p0):</strong> 获取集群中每个挂起作业的作业 ID、用户和挂起原因。<li><strong>关键挂起原因 (-p1):</strong> 检索作业的关键挂起原因。如果关键挂起原因是基于主机的，则显示关键挂起原因和相应的主机数量。否则，仅显示关键挂起原因。（注意：如果没有除主要原因之外的主机原因，则主要原因将作为作业的关键挂起原因显示）。<li><strong>候选主机挂起原因 (-p2):</strong> 更好地理解作业未运行的原因以及您可以采取的措施。<code class="language-plaintext highlighter-rouge">bjobs -p2</code> 选项显示集群中的总主机数和考虑的总数。对于考虑的主机，显示每个主机上的实际原因。对于每个挂起原因，显示给出该原因的主机数量。实际原因消息按从最常见到最不常见的顺序列出。基于主机的挂起原因分为候选主机原因和非候选主机原因，但使用此选项，您只会看到候选主机的原因。候选主机的原因可用于使作业运行。例如，对于原因“作业对保留资源 (mem) 的资源需求未满足”，用户可以选择减少作业的内存需求。</ul><h2 id="查看-lsf-集群和作业信息"><span class="me-2">查看 LSF 集群和作业信息</span><a href="#查看-lsf-集群和作业信息" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>点击 <strong>Grid</strong> 标签页，并参考左侧的 Grid 菜单栏来查看 LSF 集群和作业信息。</p><ul><li><strong>查看集群和主机健康摘要：</strong> 转到 Grid 菜单栏的 <strong>Dashboards</strong> 部分。<li><strong>控制集群：</strong> 转到 Grid 菜单栏的 <strong>Management</strong> 部分（仅对具有 Cluster Control Management 领域权限的用户可用）。<li><strong>查看 LSF 作业信息：</strong> 转到 Grid 菜单栏的 <strong>Job Info</strong> 部分。提供按主机、主机组、队列、作业数组、应用程序或组级别的 LSF 作业信息，以及特定作业的详细信息和挂起原因历史。<li><strong>查看 LSF 用户和用户组信息：</strong> 转到 Grid 菜单栏的 <strong>User/Group Info</strong> 部分。<li><strong>查看主机和主机组的负载信息：</strong> 转到 Grid 菜单栏的 <strong>Load Info</strong> 部分。<li><strong>查看 LSF 主机和主机组信息：</strong> 转到 Grid 菜单栏的 <strong>Host Info</strong> 部分。<li><strong>查看每日统计、FLEXlm 许可证使用和作业参数：</strong> 转到 Grid 菜单栏的 <strong>Reports</strong> 部分。可以筛选特定信息的统计和批处理系统参数。<li><strong>配置 Grid 标签页设置：</strong> 点击 <strong>Grid</strong> 标签页，然后点击右侧的 <strong>Settings</strong> 标签页来配置 Grid 标签页中的项目。</ul><p>(有关 Dashboards, Job Info, User/Group Info, Load Info, Host Info, Reports 各部分的详细信息，请参考 PDF 原文第 76-85 页)</p><h2 id="查看集群和主机的时间序列图"><span class="me-2">查看集群和主机的时间序列图</span><a href="#查看集群和主机的时间序列图" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>时间序列图呈现依赖于时间的集群状态和详细信息，时间是这些折线图的 X 轴。</p><ul><li><strong>查看方式：</strong><ul><li><strong>树视图 (Tree view):</strong> 点击 <strong>Graphs</strong> 标签页，然后点击右侧的 <strong>Tree view</strong> 标签页。按设备和集群组织访问所有图表。点击根级别名称查看摘要信息，点击树部分查看主机特定信息。使用放大镜查看更详细的信息，使用扳手图标显示 RRD 工具收集的调试信息。<li><strong>列表视图 (List view):</strong> 点击 <strong>Graphs</strong> 标签页，然后点击右侧的 <strong>List view</strong> 标签页。选择一个或多个集群名称，然后点击 <strong>View</strong>。<li><strong>预览视图 (Preview):</strong> 点击 <strong>Graphs</strong> 标签页，然后点击右侧的 <strong>Preview</strong> 标签页。可以按主机筛选以限制显示的图表数量。<li><strong>操作图标：</strong> 在查看数据行时，点击 <strong>View host job detail</strong> 或 <strong>View graphs</strong> 操作图标可查看特定行（如特定集群、主机或队列）的时间序列图。</ul><li><strong>配置图表显示设置：</strong> 点击 <strong>Graphs</strong> 标签页，然后点击右侧的 <strong>Settings</strong> 标签页。可以配置图表外观、默认页面设置、缩略图大小、树/预览/列表视图模式的默认设置以及字体。</ul><h2 id="查看集群和主机的非时间序列图表"><span class="me-2">查看集群和主机的非时间序列图表</span><a href="#查看集群和主机的非时间序列图表" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>非时间序列图表呈现不依赖于时间的集群和主机统计信息。由于统计信息不具有时间敏感性，RTM 可以使用图形丰富的格式（如饼图和条形图）来呈现这些数据。</p><p><strong>步骤：</strong></p><ol><li>点击 <strong>Cluster</strong> (或 <strong>Grid</strong>) 标签页。<li>在 <strong>Dashboards</strong> 部分，点击 <strong>Statistical</strong>。<li>在 <strong>Cluster Statistics</strong> 选择过滤器中，选择您希望以图表形式查看的数据类型。<li>如果图表旁边有 <strong>Selectable Reports</strong> 对话框，可以通过点击报告名称来选择不同的报告类型以查看不同的数据。</ol><h2 id="为监控-lsf-集群或许可证服务创建图表"><span class="me-2">为监控 LSF 集群或许可证服务创建图表</span><a href="#为监控-lsf-集群或许可证服务创建图表" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>RTM 提供了丰富的时序图，为集群和应用程序管理员及团队负责人提供对其环境运行情况的深入了解。RTM 中提供了许多开箱即用的图表，可用于深入了解作业处理方式和资源使用情况。</p><p><strong>步骤：</strong></p><ol><li>点击 <strong>Console</strong> 标签页。<li>在 <strong>Create</strong> 下，点击 <strong>New Graphs</strong>。<li>在 <strong>Host</strong> 字段中选择您的 LSF 或许可证服务器。<li>在 <strong>Graph Types</strong> 字段中选择图表类别以筛选可用图表类型。<li>在 <strong>Graph Templates</strong> 列底部的 <strong>Create</strong> 字段中，选择要为 LSF 或许可证服务创建的图表类型。</ol><p><strong>后续操作：</strong></p><ul><li>可以通过点击 <strong>Console &gt; Management &gt; Graph Management</strong>，然后点击主机或图表的名称来编辑图表。<li>更多关于图表和图表模板的信息，请参考“图表和图表模板”文档。</ul><h2 id="调整-rtm-tuning-rtm"><span class="me-2">调整 RTM (Tuning RTM)</span><a href="#调整-rtm-tuning-rtm" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>高级用户可以修改 RTM 以满足其需求。</p><ul><li><strong>更新 grid_add_cluster.php:</strong> 如果您向主机模板添加了图表模板、为数据查询创建了新的图表模板或创建了新的数据查询，则必须更新 <code class="language-plaintext highlighter-rouge">grid_add_cluster.php</code>。<li><strong>更改 Advocate 端口号:</strong> 如果默认的 8089 端口被其他应用程序硬编码使用，可以更改 Advocate 端口号。<ol><li>在以下文件中搜索 8089 并更改端口号：<code class="language-plaintext highlighter-rouge">/etc/init.d/advocate</code>, <code class="language-plaintext highlighter-rouge">/opt/advocate/advocate.init</code>, <code class="language-plaintext highlighter-rouge">/opt/advocate/command_advocate.py</code>。<li>更新 Cacti 数据库：为 <code class="language-plaintext highlighter-rouge">advocate_port</code> 设置新端口号的值。<li>重启 Advocate 服务。</ol></ul><h2 id="大型集群的性能调优"><span class="me-2">大型集群的性能调优</span><a href="#大型集群的性能调优" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="将-rrd-文件存储在单独的磁盘上"><span class="me-2">将 RRD 文件存储在单独的磁盘上</span><a href="#将-rrd-文件存储在单独的磁盘上" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>关于此任务：</strong></p><ul><li>为提高性能，将 RRD 文件存储在与数据库不同的单独磁盘上，并创建指向新位置的符号链接。</ul><p><strong>步骤：</strong></p><ol><li>在单独的磁盘上创建目录，例如：<code class="language-plaintext highlighter-rouge">mkdir /newDirectory</code>。<li>将文件复制到新目录，例如：<code class="language-plaintext highlighter-rouge">cp –p /opt/cacti/rra/* /newDirectory</code>。<li>备份现有文件并创建符号链接，例如：<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">mv</span> /opt/cacti/rra /opt/cacti/rra.bak
<span class="nb">ln</span> –s /newDirectory /opt/cacti/rra
</pre></table></code></div></div></ol><h3 id="增加数据库内存"><span class="me-2">增加数据库内存</span><a href="#增加数据库内存" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>关于此任务：</strong></p><ul><li>如果您看到数据库内存不足的错误（通常是数据库错误 1114），请增加分配给数据库的最大内存。</ul><p><strong>步骤：</strong></p><ol><li>编辑 <code class="language-plaintext highlighter-rouge">/etc/my.cnf</code> 文件并增加 <code class="language-plaintext highlighter-rouge">max_heap_table_size</code> 的值。<li>重启 mysqld 服务：<code class="language-plaintext highlighter-rouge">service mysqld restart</code>。</ol><h3 id="为磁盘-io-繁重的系统启用按需-rrd-文件更新"><span class="me-2">为磁盘 I/O 繁重的系统启用按需 RRD 文件更新</span><a href="#为磁盘-io-繁重的系统启用按需-rrd-文件更新" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>关于此任务：</strong></p><ul><li>如果您遇到高磁盘 I/O 等待时间的问题，请启用按需 RRD 文件更新。启用后如果问题仍然存在，可以考虑使用 Spine（Cacti 的附加功能）。</ul><p><strong>步骤：</strong></p><ol><li>转到 <strong>Console &gt; Configuration &gt; RTM Settings</strong>。<li>选择 <strong>Performance</strong> 标签页。<li>在 <strong>On Demand RRD Update Settings</strong> 部分，选中 <strong>Enable On Demand RRD Updating</strong>。<li>（可选）通过修改 <strong>How Often Should Boost Update All RRDs</strong> 和 <strong>Maximum Records</strong> 字段的值来更改 RRD 文件的更新频率。<li>点击 <strong>Save</strong>。</ol><h3 id="配置并发轮询器进程"><span class="me-2">配置并发轮询器进程</span><a href="#配置并发轮询器进程" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>步骤：</strong></p><ol><li>转到 <strong>Console &gt; Configuration &gt; RTM Settings</strong>。<li>点击 <strong>Poller</strong> 标签页。<li>在 <strong>General</strong> 部分，更改 <strong>Maximum Concurrent Poller Processes</strong> 的值。<li>点击 <strong>Save</strong>。</ol><h3 id="启用数据库记录分区"><span class="me-2">启用数据库记录分区</span><a href="#启用数据库记录分区" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>关于此任务：</strong></p><ul><li>数据库记录分区将较大的 LSF 作业数据表拆分为多个表，并在数据库维护操作期间加快处理速度。如果您每天有大量作业或希望延长保留作业摘要数据的时间，则需要分区。<li>调整分区大小，使其最多包含约 200 万条记录。调整分区大小时，请考虑主机为数据库提供的内存量（每个作业记录在数据库中占用 4 KB）。<li>您还可以指定每个分区使用的时间段。增加时间段意味着数据库包含更多用于整体分析的数据，但也会增加删除作业记录对系统的影响。</ul><p><strong>步骤：</strong></p><ol><li>转到 <strong>Console &gt; Configuration &gt; RTM Settings</strong>。<li>选择 <strong>Maint</strong> 标签页。<li>在 <strong>Large System Settings</strong> 部分，选中 <strong>Enable Record Partitioning</strong> 复选框。<li>在 <strong>Partition Size</strong> 字段中指定时间段。<li>在 <strong>Maximum Partitions</strong> 字段中指定要在数据库中保留的最大分区数。当分区表数量达到此数目时，RTM 会在创建新分区表之前删除最旧的分区表。增加分区数量意味着数据库包含更多用于整体分析的数据，但也会增加数据库的大小。<li>点击 <strong>Save</strong>。</ol><h3 id="配置数据收集频率"><span class="me-2">配置数据收集频率</span><a href="#配置数据收集频率" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>关于此任务：</strong></p><ul><li>对于大型集群，更改数据收集频率。数据收集频率是为每个 LSF 集群配置的。<li>如果您在 <code class="language-plaintext highlighter-rouge">cacti.log</code> 文件中持续看到类似以下的错误，请降低数据收集频率： <code class="language-plaintext highlighter-rouge">ERROR: Run-On/Abended Process Detected for ClusterName:'Large Cluster', ClusterID:'1', Process:'GRIDJOBS', PID:'19749', Attempting to Kill PID</code></ul><p><strong>步骤：</strong></p><ol><li>转到 <strong>Console &gt; Clusters &gt; Clusters</strong>。<li>选择您要修改的 LSF 集群的名称。<li>点击 <strong>Poller</strong> 标签页。<li>您可以修改以下字段的值：<ul><li>在 <strong>Queue/Host/Load Collection Settings</strong> 部分：<ul><li>Collection Frequency and Max Allowed Runtime</ul><li>在 <strong>Job Collection Settings</strong> 部分：<ul><li>Minor Collection Frequency, Major Collection Frequency, and Max Allowed Runtime</ul></ul><li>点击 <strong>Save</strong>。</ol><h3 id="增加-lsf-api-超时值"><span class="me-2">增加 LSF API 超时值</span><a href="#增加-lsf-api-超时值" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>关于此任务：</strong></p><ul><li>如果您在 <code class="language-plaintext highlighter-rouge">cacti.log</code> 文件中看到指示 LSF API 超时的错误，请增加超时值。</ul><p><strong>步骤：</strong></p><ol><li>转到 <strong>Console &gt; Clusters &gt; Clusters</strong>。<li>选择您要修改的 LSF 集群的名称。<li>点击 <strong>Advanced</strong> 标签页。<li>在 <strong>Cluster Connection Timeout Settings</strong> 部分，修改以下字段的值：<ul><li>Base Timeout<li>Batch Timeout<li>Batch Job Info Timeout<li>Batch Job Info Retries</ul><li>点击 <strong>Save</strong>。</ol><h3 id="增强数据库性能"><span class="me-2">增强数据库性能</span><a href="#增强数据库性能" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>关于此任务：</strong></p><ul><li>将 <code class="language-plaintext highlighter-rouge">my.cnf</code> 中的 <code class="language-plaintext highlighter-rouge">innodb_flush_log_at_trx_commit</code> 设置更改为 <code class="language-plaintext highlighter-rouge">2</code>，以每秒而不是每次查询提交时将数据库日志刷新到磁盘。此更改减少了随机磁盘 I/O 量，从而提高了 RTM 的可伸缩性。</ul><p><strong>步骤：</strong></p><ol><li>编辑 <code class="language-plaintext highlighter-rouge">/etc/my.cnf</code> 文件并将 <code class="language-plaintext highlighter-rouge">innodb_flush_log_at_trx_commit</code> 的值更改为 <code class="language-plaintext highlighter-rouge">2</code>。<li>重启 mysqld 服务：<code class="language-plaintext highlighter-rouge">service mysqld restart</code>。</ol><h2 id="维护数据库"><span class="me-2">维护数据库</span><a href="#维护数据库" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>以下是您可以采取的维护或优化数据库的操作：</p><ul><li>在数据库中设置记录分区<li>备份和恢复 RTM 系统设置</ul><h3 id="在数据库中设置记录分区"><span class="me-2">在数据库中设置记录分区</span><a href="#在数据库中设置记录分区" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>关于此任务：</strong></p><ul><li>在大型数据库中，删除旧的作业记录和其他数据库维护任务可能会对数据库性能产生显著影响。通过启用记录分区可以提高数据库性能。分区将数据库内的表划分为多个较小的表。从较小的表中删除作业记录对活动表的系统性能影响小于从较大的表中删除作业记录。<li>您可以为 RTM 监控的以下数据库表设置分区（所有以下表都会受到影响）：<ul><li>GRID_ARRAYS<li>GRID_JOB_DAILY_STATS<li>GRID_JOBS_FINISHED<li>GRID_JOBS_MEMPERF<li>GRID_JOBS_RUSAGE</ul></ul><p><strong>步骤：</strong></p><ol><li>点击 <strong>Console</strong> 标签页。<li>在 <strong>Configuration</strong> 部分，点击 <strong>RTM Settings</strong>。<li>点击 <strong>Maint</strong> 标签页。<li>在 <strong>System Maintenance Settings</strong> 部分，您可以在 <strong>Database Maintenance Time</strong> 字段中指定时间，以指示何时必须从数据库中删除旧的数据库记录。所有分区数据始终根据您在该页面部分指定的保留期进行保留。<li>向下滚动到页面的 <strong>Large System Settings</strong> 部分，并确保设置了以下选项：<ul><li><strong>Enable Record Partitioning</strong>: 选中此框以在数据库中启用记录分区。如果您每天有大量作业或希望延长保留作业摘要数据的时间，则需要分区。<li><strong>Partition Size</strong>: 指定不同分区之间的时间。增加时间段意味着数据库包含更多用于整体分析的数据，但也会增加删除作业记录对系统的影响。</ul><li>点击 <strong>Save</strong> 保存数据库记录分区设置。</ol><p><strong>结果：</strong></p><ul><li>分区表具有数字后缀（_v000, _v001, … _vnnn）。最新的表具有最大的编号。</ul><h3 id="备份和恢复-rtm-系统设置"><span class="me-2">备份和恢复 RTM 系统设置</span><a href="#备份和恢复-rtm-系统设置" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>RTM 将系统和图表设置保存在 Cacti 数据库中。您可以使用 RTM 控制台备份 Cacti 数据库的操作，以便稍后恢复 RTM 系统。</p><ul><li><p><strong>用途：</strong> 如果您更改了 RTM 主机中的配置并希望恢复（例如，错误导入 Cacti 模板导致图表不再更新，或意外从 RTM 控制台删除了集群），可以恢复 RTM 系统和图表设置，并恢复到原始的备份设置。</p><li><p><strong>恢复命令示例：</strong> <code class="language-plaintext highlighter-rouge">mysql cacti &lt; backup/*.sql</code></p><li><strong>限制：</strong><ul><li>RTM 控制台无法恢复 RTM 监控的集群的所有作业性能数据。RTM 中任何此类数据都可能已过时。<li>如果要完全备份整个数据库，必须使用 <code class="language-plaintext highlighter-rouge">mysqldump</code> 命令。<li>如果经常使用 <code class="language-plaintext highlighter-rouge">mysqldump</code> 命令，则不能使用 MyISAM 表结构。</ul><li><p><strong>备份内容：</strong></p><ul><li><p><code class="language-plaintext highlighter-rouge">lsfpollerd.conf</code>: 包含凭据的数据库文件。</p><li><p><code class="language-plaintext highlighter-rouge">lsf.conf</code>: 与每个集群关联的 <code class="language-plaintext highlighter-rouge">lsf.conf</code> 文件。</p><li><p><code class="language-plaintext highlighter-rouge">ego.conf</code> (仅适用于 LSF 8.0 集群): 与每个集群关联的 <code class="language-plaintext highlighter-rouge">ego.conf</code> 文件。</p><li><p><code class="language-plaintext highlighter-rouge">server.key</code> 和 <code class="language-plaintext highlighter-rouge">server.crt</code>: 用作 Advocate 的 httpd 认证文件。</p><p>除了以下大型表外，其它Cacti 数据库中的所有表都备份：</p><ul><li>GRID_ARRAYS, GRID_ARRAYS_FINISHED<li>GRID_JOB_DAILY_STATS, GRID_JOB_INTERVAL_STATS<li>GRID_JOBS, GRID_JOBS_FINISHED<li>GRID_JOBS_JOBHOSTS, GRID_JOBS_JOBHOSTS_FINISHED<li>GRID_JOBS_MEMPERF<li>GRID_JOBS_PENDREASONS, GRID_JOBS_PENDREASONS_FINISHED<li>GRID_JOBS_REQHOSTS, GRID_JOBS_REQHOSTS_FINISHED<li>GRID_JOBS_RUSAGE<li>LIC_DAILY_STATS, LIC_FLEXLM_LOG, LIC_INTERVAL_STATS, LIC_LUM_EVENTS<li>POLLER_OUTPUT, POLLER_OUTPUT_BOOST<li>SYSLOG, SYSLOG_REMOVED</ul></ul><li><strong>操作：</strong><ul><li>使用 RTM 控制台备份 RTM 系统<ul><li>启用自动数据归档</ul></ul></ul><h4 id="使用-rtm-控制台备份-rtm-系统"><span class="me-2">使用 RTM 控制台备份 RTM 系统</span><a href="#使用-rtm-控制台备份-rtm-系统" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>关于此任务：</strong></p><ul><li>在升级到较新版本的 RTM 之前，必须首先备份现有的 Cacti 数据库。在计划的服务器维护期间备份 Cacti 数据库非常重要，您可以恢复到以前的 RTM 系统和图表设置。</ul><p><strong>步骤：</strong></p><ol><li>转到 <strong>Console &gt; Configuration &gt; RTM Settings</strong>。<li>点击 <strong>Maint</strong> 标签页。<li>向下滚动到页面的 <strong>Database Backups</strong> 部分，并确保设置了以下选项：<ul><li><strong>Backup Cacti Database</strong>: 选中此框以确保在运行维护脚本时备份 Cacti 数据库。<li><strong>Backup Schedule</strong>: 指定备份计划为 Daily 或 Weekly。<li><strong>Weekly Backup Day</strong>: 如果选择 Weekly 备份，请指定要进行备份的日期。<li><strong>Backup Generations</strong>: 指定要维护的备份文件副本数。<li><strong>Database Backup Location</strong>: 如果备份目录尚不存在，请提供位置。（如果目录存在，则在目录字段下方显示消息“[OK: DIR FOUND]”）。<li><strong>Post Backup Command</strong>: 提供在 Cacti 数据库和计划备份完成后运行的备份后脚本。确保文件对 RTM 服务帐户既可执行又可读。</ul><li>在 <strong>Utilities</strong> 部分，点击 <strong>RTM Utilities</strong>。<li>在 <strong>RTM Utilities</strong> 页面的 <strong>Database Administration</strong> 部分，点击 <strong>Force Cacti Backup</strong>。页面底部的 <strong>Backup Files</strong> 表将更新，显示新创建的备份文件、修改日期和文件大小。<li>点击备份文件名将其下载到指定位置。<li>下载完成后，验证 <code class="language-plaintext highlighter-rouge">.tgz</code> 文件包含必要的 SQL 文件、配置文件 (<code class="language-plaintext highlighter-rouge">rtm.lic</code>, <code class="language-plaintext highlighter-rouge">lsfpollerd.conf</code>, <code class="language-plaintext highlighter-rouge">server.crt</code>, <code class="language-plaintext highlighter-rouge">server.key</code>) 以及每个集群的 <code class="language-plaintext highlighter-rouge">lsf.conf</code> 和 <code class="language-plaintext highlighter-rouge">ego.conf</code>（如果适用）。</ol><h4 id="启用自动数据归档"><span class="me-2">启用自动数据归档</span><a href="#启用自动数据归档" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>关于此任务：</strong></p><ul><li>启用数据归档可在计划的服务器维护期间将现有的作业和作业相关数据保存到归档数据库。</ul><p><strong>步骤：</strong></p><ol><li>点击 <strong>Console</strong> 标签页。<li>在 <strong>Configuration</strong> 部分，点击 <strong>RTM Settings</strong>。<li>点击 <strong>Archiving</strong> 标签页。<li>要启用现有作业和作业相关数据的归档，请选中 <strong>Enable Data Archiving</strong> 复选框并指定数据归档设置。<li>点击 <strong>Save</strong> 保存数据归档设置。</ol><h4 id="手动备份或恢复-rtm-数据库-旧版本"><span class="me-2">手动备份或恢复 RTM 数据库 (旧版本)</span><a href="#手动备份或恢复-rtm-数据库-旧版本" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>对于较旧版本的 RTM，您可能需要手动备份数据库。步骤包括：备份网站、备份数据库、备份 RTM 轮询器，然后升级 Cacti 网站和 Grid 插件、升级数据库、升级 RTM 轮询器。</p><ul><li><strong>备份网站：</strong> 备份 Cacti 目录，通常排除日志和 rra 目录。需要备份 <code class="language-plaintext highlighter-rouge">include/global.php</code>（包含数据库连接和插件列表）。如果修改了默认 RTM 轮询器脚本或数据查询，则分别备份 <code class="language-plaintext highlighter-rouge">scripts</code> 和 <code class="language-plaintext highlighter-rouge">resource</code> 目录。<li><strong>备份数据库：</strong> RTM 提供 <code class="language-plaintext highlighter-rouge">database_backup.php</code> 工具备份数据库模式和重要的 Cacti/RTM 配置表，但不包括大型作业历史表。在 <strong>Console &gt; Configuration &gt; RTM Settings &gt; Maint</strong> 指定备份位置后，运行 <code class="language-plaintext highlighter-rouge">php -q database_backup.php</code>。<li><strong>备份 RTM 轮询器：</strong> 备份 RTM 轮询器目录（例如 <code class="language-plaintext highlighter-rouge">/opt/rtm</code> 或 <code class="language-plaintext highlighter-rouge">/usr/local/grid</code> 下的 <code class="language-plaintext highlighter-rouge">bin</code>, <code class="language-plaintext highlighter-rouge">lic</code>, <code class="language-plaintext highlighter-rouge">lsf*</code> 目录）。<li><strong>升级 Cacti 网站和 Grid 插件：</strong> 注意文件所有权（通常是 cacti:cacti）。将升级包中的 <code class="language-plaintext highlighter-rouge">cacti</code> 目录复制到目标位置，并确保 <code class="language-plaintext highlighter-rouge">config.php</code> 文件不变。<li><strong>升级数据库：</strong> 运行 <code class="language-plaintext highlighter-rouge">php -q database_upgrade.php</code> 来更新数据库模式以适应新功能。<li><strong>升级 RTM 轮询器：</strong> 验证文件权限。将升级包中的 <code class="language-plaintext highlighter-rouge">poller</code> 目录复制到轮询器安装位置并设置正确的所有权。</ul><h2 id="设置远程数据库主机"><span class="me-2">设置远程数据库主机</span><a href="#设置远程数据库主机" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><strong>前提条件：</strong></p><ul><li>数据库服务器端口（默认为 3306）在防火墙上已打开。<li>目标数据库主机满足以下要求：<ul><li>运行受支持的操作系统。<li>至少 4 GB RAM 和 40 GB 硬盘空间。<li>已安装数据库。<li>数据库主机名和 RTM 主机名可以相互解析。</ul></ul><p><strong>关于此任务：</strong></p><ul><li>默认情况下，RTM 主机充当数据库主机。您可以选择将数据库设置在另一台主机上，以分散 RTM 活动或使用更优化的数据库主机。<li><strong>重要提示：</strong> 请在 RTM 安装的初始设置期间执行这些步骤。如果在 RTM 运行一段时间后执行这些步骤，数据库传输到另一台主机可能需要相当长的时间，在此期间数据库将停机。</ul><p><strong>步骤：</strong></p><ol><li><p><strong>手动备份现有 RTM 数据库：</strong></p><p>使用 RTM 控制台备份 (<strong>Console &gt; Configuration &gt; RTM Settings &gt; Maint</strong> 和 <strong>Console &gt; Utilities &gt; RTM Utilities &gt; Force Cacti Backup</strong>)。</p><li><p><strong>准备 RTM 主机进行数据库转换：</strong></p><p>a. 登录 RTM 主机。</p><p>b. 停止所有基本服务：<code class="language-plaintext highlighter-rouge">lsfpollerd</code>, <code class="language-plaintext highlighter-rouge">licpollerd</code>, <code class="language-plaintext highlighter-rouge">crond</code>，并禁用 <code class="language-plaintext highlighter-rouge">mysqld</code> 服务。</p><p>c. 创建 SQL 数据库内存转储：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>```sql
mysqldump cacti &gt; cactidump.sql
mysqldump mysql time_zone_name &gt; timezone.sql
``` ​    
</pre></table></code></div></div><p>记录当前目录，以便将 SQL 转储文件复制到新的数据库主机。</p><p>d. 修改 RTM 配置文件以引用新的数据库主机。在以下文件中，将 <code class="language-plaintext highlighter-rouge">localhost</code> 更改为新的数据库主机名，或将 <code class="language-plaintext highlighter-rouge">127.0.0.1</code> 更改为新的数据库 IP 地址：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>/RTM_TOP/cacti/include/config.php
/RTM_TOP/rtm/lsf&lt;version_number&gt;/bin/grid.conf
/RTM_TOP/rtm/etc/lsfpollerd.conf
/etc/rsyslog.conf
/RTM_TOP/cacti/plugins/syslog/config.php
/RTM_TOP/rtm/etc/lic.conf
</pre></table></code></div></div><p>e. 更新 RTM 管理主机上的 ODBC 配置文件 (<code class="language-plaintext highlighter-rouge">/etc/odbc.ini</code>)，指定新的远程数据库服务器信息（Server, Database, UID, PASSWORD, Port 等）。使用 <code class="language-plaintext highlighter-rouge">odbcinst -j</code> 查找文件位置。</p><li><p>设置新的数据库主机</p><p>a. 登录新的数据库主机。</p><p>b. 安装并启动数据库服务（例如 MySQL/MariaDB）。</p><p>c. 创建新的 RTM 数据库：<code class="language-plaintext highlighter-rouge">mysqladmin -u root create cacti</code>。</p><p>d. 分配适当的数据库权限，允许 RTM 主机连接：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>```sql
GRANT ALL ON cacti.* TO cacti@&lt;rtm_host_ip&gt; IDENTIFIED BY 'admin';
GRANT SELECT ON mysql.time_zone_name TO cacti@&lt;rtm_host_ip&gt; IDENTIFIED BY 'admin';
```
</pre></table></code></div></div><p>e. 备份原始 <code class="language-plaintext highlighter-rouge">my.cnf</code>，并将 RTM 主机 <code class="language-plaintext highlighter-rouge">&lt;RTM_TOP&gt;/rtm/share</code> 中的 <code class="language-plaintext highlighter-rouge">my.cnf.*.innodb</code> 文件复制到新数据库主机的 <code class="language-plaintext highlighter-rouge">/etc</code> 目录下。</p><p>f. 将 SQL 数据库转储文件从 RTM 主机复制到新的数据库主机。</p><p>g. 将 SQL 数据库转储文件导入新数据库：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>```bash
mysql cacti &lt; /tmp/cactidump.sql
mysql mysql &lt; /tmp/timezone.sql
```
</pre></table></code></div></div><p>h. 重启数据库服务。</p><li><p><strong>重启服务并验证：</strong></p><p>a. 登录 RTM 主机。</p><p>b. 重启基本服务：<code class="language-plaintext highlighter-rouge">crond</code>, <code class="language-plaintext highlighter-rouge">rsyslog</code>, <code class="language-plaintext highlighter-rouge">lsfpollerd</code>, <code class="language-plaintext highlighter-rouge">licpollerd</code>。</p><p>c. 验证数据库设置是否正确，检查 <code class="language-plaintext highlighter-rouge">lsfpollerd</code> 和 <code class="language-plaintext highlighter-rouge">licpollerd</code> 的状态。如果它们正在运行，则数据库设置正确。</p></ol></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/icenv/">icenv</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/rtm/" class="post-tag no-text-decoration" >rtm</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=RTM%E8%B0%83%E4%BC%98%20-%20IC%20Infra&url=https%3A%2F%2Ficinfra.cn%2Fposts%2Fadministering-rtm-advanced-configuration-and-performance-tuning%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fa-brands fa-square-x-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=RTM%E8%B0%83%E4%BC%98%20-%20IC%20Infra&u=https%3A%2F%2Ficinfra.cn%2Fposts%2Fadministering-rtm-advanced-configuration-and-performance-tuning%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Ficinfra.cn%2Fposts%2Fadministering-rtm-advanced-configuration-and-performance-tuning%2F&text=RTM%E8%B0%83%E4%BC%98%20-%20IC%20Infra" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div><div class="payment-info mt-5 text-center"><h4>支持创作者</h4><p>如果本文帮助到你，可以通过以下收款码支持我：</p><a href="https://cdn.jsdelivr.net/gh/icinfra/icinfra-artifacts-0001@artifacts/img/qrcode.jpg" class="popup img-link img-fluid shimmer"><img src="https://cdn.jsdelivr.net/gh/icinfra/icinfra-artifacts-0001@artifacts/img/qrcode.jpg" alt="收款码" style="max-width: 300px;" loading="lazy"></a><p>感谢你的支持！</p></div></div></article><script src="https://cdn.jsdelivr.net/npm/mermaid@11.6.0/dist/mermaid.min.js"></script> <script> document.addEventListener('DOMContentLoaded', function() { mermaid.initialize({ startOnLoad: true, theme: "default" }); // 既支持 language-mermaid 也支持 mermaid 类 window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid, .mermaid')); }); </script></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/toggle-layers-visibility/">Toggle Layers Visibility</a><li class="text-truncate lh-lg"> <a href="/posts/cadence-eda-downloader-user-guide/">Cadence EDA Downloader User Guide </a><li class="text-truncate lh-lg"> <a href="/posts/privacy-policy-for-cadence-eda-downloader/">Privacy Policy for Cadence EDA Downloader</a><li class="text-truncate lh-lg"> <a href="/posts/cadence-support-downloader-privacy-policy/">Cadence Support Downloader: Privacy Policy</a><li class="text-truncate lh-lg"> <a href="/posts/Lumerical-job-scheduler-integration-Slurm-Torque-LSF-SGE/">Lumerical job scheduler integration (Slurm, Torque, LSF, SGE) </a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/formatting/">formatting</a> <a class="post-tag btn btn-outline-primary" href="/tags/post/">post</a> <a class="post-tag btn btn-outline-primary" href="/tags/python/">python</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux/">linux</a> <a class="post-tag btn btn-outline-primary" href="/tags/analog/">analog</a> <a class="post-tag btn btn-outline-primary" href="/tags/ipa/">ipa</a> <a class="post-tag btn btn-outline-primary" href="/tags/links/">links</a> <a class="post-tag btn btn-outline-primary" href="/tags/lsf/">lsf</a> <a class="post-tag btn btn-outline-primary" href="/tags/eda/">eda</a> <a class="post-tag btn btn-outline-primary" href="/tags/license/">license</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/rtm-installation/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1743166800" data-df="ll" > Mar 28, 2025 </time><h4 class="pt-0 my-2">Install IBM Spectrum LSF RTM on CentOS 7.9</h4><div class="text-muted"><p>引言 IBM Spectrum LSF 实时监控（RTM）是一个监控工具，它为计算环境中的工作负载报告和管理提供了一个仪表板。本指南概述了在 CentOS 7.9 系统上安装 IBM Spectrum LSF RTM 的步骤。 前提条件 确保系统满足 RTM 版本所需的系统规格。 获得安装的系统上管理员权限。 安装步骤 准备系统 验证您的系统满足软件依赖性和系统要求。本文...</p></div></div></a></article><article class="col"> <a href="/posts/ibm-lsf-rtm-backups/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1744473600" data-df="ll" > Apr 12, 2025 </time><h4 class="pt-0 my-2">IBM LSF RTM backups</h4><div class="text-muted"><p>详细的备份步骤和方案： 1. 日常备份 RTM 会在每天的 00:00 自动进行默认的设置和配置备份，备份文件存储在 RTM_TOP/cacti/backup/cacti_db_backup_xx.tgz 中。需要注意，这是设置与配置的数据库备份，不是RTM完整备份。 2. 备份数据分区 通过启用分区功能，可以最小化灾难恢复时的数据丢失。分区备份文件存储在 RTM_TOP/backu...</p></div></div></a></article><article class="col"> <a href="/posts/chatgpr-improve-memory/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1744300800" data-df="ll" > Apr 10, 2025 </time><h4 class="pt-0 my-2">ChatGPT improve memory</h4><div class="text-muted"><p></p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/purge-web-cache/" class="btn btn-outline-primary" aria-label="Older" ><p>网页总是显示旧内容，无法加载到新内容</p></a> <a href="/posts/disuz-deployment/" class="btn btn-outline-primary" aria-label="Newer" ><p>Discuz 容器化部署</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://github.com/wanlinwang">wanlinwang</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Rights reserved.</span></p><p></p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/formatting/">formatting</a> <a class="post-tag btn btn-outline-primary" href="/tags/post/">post</a> <a class="post-tag btn btn-outline-primary" href="/tags/python/">python</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux/">linux</a> <a class="post-tag btn btn-outline-primary" href="/tags/analog/">analog</a> <a class="post-tag btn btn-outline-primary" href="/tags/ipa/">ipa</a> <a class="post-tag btn btn-outline-primary" href="/tags/links/">links</a> <a class="post-tag btn btn-outline-primary" href="/tags/lsf/">lsf</a> <a class="post-tag btn btn-outline-primary" href="/tags/eda/">eda</a> <a class="post-tag btn btn-outline-primary" href="/tags/license/">license</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'icinfra/icinfra-discussions', 'data-repo-id': 'R_kgDOOURp_w', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOOURp_84Coy9P', 'data-mapping': 'pathname', 'data-strict' : '1', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
